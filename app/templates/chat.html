<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>End-to-End Encryption Browser Messenger</title>
    <script src="https://cdn.socket.io/4.0.0/socket.io.min.js"></script>
    <link rel="stylesheet" href="static/css/chat.css">
</head>
<body>
    <a href="{{ url_for('settings') }}">
        <img src="{{ url_for('static', filename='img/profile.svg') }}" alt="Top Right Image" class="top-right-image">
      </a>
    <pre id="asciiArt">
                                                                                 
         __________ ______________ ________          _     ___       ___         
         `MMMMMMMMM `MM'MMMMMMMMMM `MMMMMMMb.       dM.    `MMb     dMM'         
          MM      \  MM /   MM   \  MM    `Mb      ,MMb     MMM.   ,PMM          
  ____    MM         MM     MM      MM     MM      d'YM.    M`Mb   d'MM   ____   
 6MMMMb   MM    ,    MM     MM      MM     MM     ,P `Mb    M YM. ,P MM  6MMMMb  
MM'  `Mb  MMMMMMM    MM     MM      MM    .M9     d'  YM.   M `Mb d' MM MM'  `Mb 
     ,MM  MM    `    MM     MM      MMMMMMM9'    ,P   `Mb   M  YM.P  MM      ,MM 
    ,MM'  MM         MM     MM      MM  \M\      d'    YM.  M  `Mb'  MM     ,MM' 
  ,M'     MM         MM     MM      MM   \M\    ,MMMMMMMMb  M   YP   MM   ,M'    
,M'       MM      /  MM     MM      MM    \M\   d'      YM. M   `'   MM ,M'      
MMMMMMMM _MMMMMMMMM _MM_   _MM_    _MM_    \M\_dM_     _dMM_M_      _MM_MMMMMMMM 
                                                                                
                                                                                
 </pre>
<div class="popup-overlay" id="passwordPopup">
    <div class="popup">
        <h2>Enter Password</h2>
        <input type="password" id="passwordInput" placeholder="Password">
        <button onclick="submitPassword()">Submit</button>
    </div>
</div>

<button class="toggle-sidebar-btn" onclick="toggleSidebar()">â˜° Menu</button>

<div class="sidebar" id="sidebar">
    <div id="userId">
        <p>Loading your ID...</p>
    </div>
    
    <div class="half-button-container">
        <button class="sidebar-halfbutton" onclick="openModal()">Add Chat</button>
        <button class="sidebar-halfbutton" onclick="removeChat()">Remove current chat</button>
        
    </div>
    <div class="invites-container">
        <div class="invites-text">Messages: </div>
        <button class="invites-button" onclick="loadInvites()">Chat invites</button>
    </div>
    
</div>

<div id="chatModal" class="modal">
    <div class="modal-content">
        <h2>Create New Chat</h2>
        <label for="chat_name">Enter chat name:</label>
        <input type="text" id="chat_name" placeholder="Chat name">
        <label for="user_id">Enter user ID:</label>
        <input type="text" id="user_id" placeholder="User ID">
        <div class="modal-actions">
            <button onclick="closeModal()">Cancel</button>
            <button onclick="addChat()">Create Chat</button>
        </div>
    </div>
</div>

<div id="chatContainer" class="chat-container" style="display: none;">
    <div class="messages">
    </div>
    <div class="input-area">
        <textarea class="input-textarea" placeholder="Type your message..."></textarea>
        <input type="file" id="fileInput" style="display: none;" />
        <label for="fileInput" class="file"><svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path fill-rule="evenodd" clip-rule="evenodd" d="M9 0H2V16H14V5L9 0ZM7 6V8H5V10H7V12H9V10H11V8H9V6H7Z" fill="#ffffff"></path> </g></svg></label>
        <button onclick="sendMessage()"><svg fill="#FFFFFF" height="200px" width="200px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 495.003 495.003" xml:space="preserve"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g id="XMLID_51_"> <path id="XMLID_53_" d="M164.711,456.687c0,2.966,1.647,5.686,4.266,7.072c2.617,1.385,5.799,1.207,8.245-0.468l55.09-37.616 l-67.6-32.22V456.687z"></path> <path id="XMLID_52_" d="M492.431,32.443c-1.513-1.395-3.466-2.125-5.44-2.125c-1.19,0-2.377,0.264-3.5,0.816L7.905,264.422 c-4.861,2.389-7.937,7.353-7.904,12.783c0.033,5.423,3.161,10.353,8.057,12.689l125.342,59.724l250.62-205.99L164.455,364.414 l156.145,74.4c1.918,0.919,4.012,1.376,6.084,1.376c1.768,0,3.519-0.322,5.186-0.977c3.637-1.438,6.527-4.318,7.97-7.956 L494.436,41.257C495.66,38.188,494.862,34.679,492.431,32.443z"></path> </g> </g></svg></button>
        
    </div>
</div>
    <script src="{{ url_for('static', filename='js/dilithium.js') }}"></script>
    <script src="{{ url_for('static', filename='js/signing.js') }}"></script>
    <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename='js/database.js') }}"></script>
    <script src="{{ url_for('static', filename='js/fileEncrypt.js') }}"></script>
    <script src="{{ url_for('static', filename='js/encryption.js') }}",type="module"></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>   
    </body>
</html>
